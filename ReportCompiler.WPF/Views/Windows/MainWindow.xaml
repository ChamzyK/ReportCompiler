<Window x:Class="ReportCompiler.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:ucvm="clr-namespace:ReportCompiler.WPF.ViewModels.UserControlViewModels"
        xmlns:ucv="clr-namespace:ReportCompiler.WPF.Views.UserControls"
        DataContext="{Binding Path=MainViewModel, Source={StaticResource Locator}}"
        Title="{Binding Title}"
        Height="500" Width="550"
        MinHeight="450" MinWidth="500"
        Style="{DynamicResource MaterialDesignWindow}"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <md:DialogHost>

        <md:DialogHost.DialogContentTemplate>
            <DataTemplate DataType="{x:Type ucvm:InfoViewModel}">
                <ucv:InfoView/>
            </DataTemplate>
        </md:DialogHost.DialogContentTemplate>

        <md:DialogHost.DialogContent>
            <ContentControl Content="{Binding}"/>
        </md:DialogHost.DialogContent>

        <DockPanel>
            <md:Card DockPanel.Dock="Top" Margin="5"
                     Background="{StaticResource PrimaryHueMidBrush}">
                <Menu md:MenuAssist.TopLevelMenuItemHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type md:Card}},Path=ActualHeight}">

                    <MenuItem Header="О программе"
                              Command="{Binding AboutProgramCommand}"/>

                    <MenuItem Header="О разработчике" 
                              Command="{Binding AboutDevCommand}"/>

                    <MenuItem Header="Выход" 
                              Command="{StaticResource CloseWindowCommand}"/>
                </Menu>
            </md:Card>

            <DockPanel>

                <UniformGrid DockPanel.Dock="Bottom" Rows="1">
                    <Button Content="Проверить данные"
                            Command="{Binding CheckDataCommand}"
                            CommandParameter="{Binding Path=DirectoriesViewModel, Source={StaticResource Locator}}"/>
                    <Button Content="Составить сводный отчет" 
                            Command="{Binding CreateReportCommand}"
                            Style="{StaticResource MaterialDesignRaisedDarkButton}"
                            CommandParameter="{Binding Path=DirectoriesViewModel, Source={StaticResource Locator}}"
                            Margin="5"/>
                </UniformGrid>

                <GroupBox Margin="5">
                    <GroupBox.Header>
                        <TextBlock Style="{DynamicResource MaterialDesignHeadline6TextBlock}">
                            <Run Text="Выбранный элемент: "/>
                            <Run Text="{Binding Path=DirectoriesViewModel.SelectedItem.Name, Source={StaticResource Locator}}"/>
                        </TextBlock>
                    </GroupBox.Header>
                    <DockPanel>
                        <Button DockPanel.Dock="Bottom"
                                Content="Вернуться к папке приложения"
                                Command="{DynamicResource AppDirectoryCommand}"/>
                        <ucv:DirectoriesView DataContext="{Binding Path=DirectoriesViewModel, Source={StaticResource Locator}}"/>
                    </DockPanel>
                </GroupBox>

            </DockPanel>

        </DockPanel>

    </md:DialogHost>
</Window>
